# GitHub åˆ†æ”¯ä¿æŠ¤è§„åˆ™è¿ç§»æŒ‡å—

> **å®‰å…¨æ— ç¼è¿ç§»** - ä»åˆ†ç¦»é—¨ç¦æ¶æ„å‡çº§åˆ°ç»Ÿä¸€é—¨ç¦ç³»ç»Ÿ

## ğŸ¯ è¿ç§»ç›®æ ‡

ä»ç°æœ‰çš„åˆ†ç¦»é—¨ç¦æ¶æ„å®‰å…¨è¿ç§»åˆ°ä¼˜åŒ–çš„ç»Ÿä¸€é—¨ç¦ç³»ç»Ÿï¼Œç¡®ä¿ï¼š
- **é›¶åœæœºè¿ç§»** - ä¸å½±å“ç°æœ‰å¼€å‘æµç¨‹
- **å®‰å…¨æ ‡å‡†ä¿æŒ** - ä¸é™ä½ä»»ä½•å®‰å…¨è¦æ±‚  
- **å‘åå…¼å®¹** - å¹³æ»‘è¿‡æ¸¡æœŸæ”¯æŒ
- **å¯å›æ»š** - å‡ºç°é—®é¢˜æ—¶å¿«é€Ÿå›é€€

## ğŸ“‹ è¿ç§»å‰ç½®æ¡ä»¶æ£€æŸ¥

### âœ… å¿…éœ€å‡†å¤‡å·¥ä½œ
- [ ] ç¡®è®¤æ‰€æœ‰ç»Ÿä¸€é—¨ç¦è„šæœ¬å·²éƒ¨ç½²å¹¶æµ‹è¯•é€šè¿‡
- [ ] éªŒè¯æ–°çš„GitHub Actionså·¥ä½œæµè¯­æ³•æ­£ç¡®
- [ ] å¤‡ä»½ç°æœ‰åˆ†æ”¯ä¿æŠ¤è§„åˆ™é…ç½®
- [ ] è·å¾—å›¢é˜Ÿè¿ç§»ç¡®è®¤
- [ ] å‡†å¤‡å›æ»šè®¡åˆ’

### ğŸ” ç¯å¢ƒéªŒè¯å‘½ä»¤
```bash
# éªŒè¯ç»Ÿä¸€é—¨ç¦è„šæœ¬
npm run guard:observability  # å¯è§‚æµ‹æ€§ç»Ÿä¸€éªŒè¯
npm run guard:security       # å®‰å…¨ç»Ÿä¸€åŒ…è£…å™¨  
npm run guard:soft          # è½¯é—¨ç¦æŠ¥å‘Š

# éªŒè¯å·¥ä½œæµè¯­æ³•
node scripts/validate-yaml.js

# æ£€æŸ¥å¿…éœ€çš„é…ç½®æ–‡ä»¶
ls config/development.json config/staging.json config/production.json
```

---

## ğŸš€ åˆ†é˜¶æ®µè¿ç§»è®¡åˆ’

### é˜¶æ®µ 1: å¹¶è¡Œè¿è¡ŒæœŸ (1å‘¨)
**ç›®æ ‡**: æ–°æ—§ç³»ç»ŸåŒæ—¶è¿è¡Œï¼ŒéªŒè¯æ–°ç³»ç»Ÿç¨³å®šæ€§

#### 1.1 éƒ¨ç½²æ–°å·¥ä½œæµ (ä¿æŒæ—§å·¥ä½œæµ)
```bash
# æ–°å·¥ä½œæµæ–‡ä»¶å·²å°±ç»ª
.github/workflows/security-unified.yml      # æ–°ç»Ÿä¸€å®‰å…¨é—¨ç¦
.github/workflows/observability-gate.yml    # æ–°ç»Ÿä¸€å¯è§‚æµ‹æ€§é—¨ç¦  
.github/workflows/soft-gates.yml           # æ–°è½¯é—¨ç¦ç³»ç»Ÿ

# æ—§å·¥ä½œæµæš‚æ—¶ä¿ç•™
.github/workflows/security.yml             # æ—§å®‰å…¨æ£€æŸ¥
.github/workflows/security-e2e.yml         # æ—§E2Eå®‰å…¨æµ‹è¯•
```

#### 1.2 æ›´æ–°åˆ†æ”¯ä¿æŠ¤ - æ·»åŠ æ–°æ£€æŸ¥
åœ¨GitHubè®¾ç½®ä¸­**æ·»åŠ **ä»¥ä¸‹çŠ¶æ€æ£€æŸ¥ï¼ˆä¸åˆ é™¤æ—§çš„ï¼‰ï¼š
- `Security Gate (Unified) / security-gate`
- `Observability Gate (Unified) / observability-checks`  
- `Soft Gates Quality Check` (è®¾ä¸ºå¯é€‰)

#### 1.3 ç›‘æ§æœŸéªŒè¯
- **CIè¿è¡Œæ—¶é—´å¯¹æ¯”** - æ–°ç³»ç»Ÿåº”æ¯”æ—§ç³»ç»Ÿå¿«50%
- **è¯¯æŠ¥ç‡å¯¹æ¯”** - æ–°ç³»ç»Ÿè¯¯æŠ¥ä¸åº”é«˜äºæ—§ç³»ç»Ÿ
- **å®‰å…¨æ£€æµ‹æ•ˆæœ** - ç¡®ä¿å®‰å…¨æ£€æµ‹æ— é—æ¼
- **å¼€å‘è€…åé¦ˆ** - æ”¶é›†å›¢é˜Ÿä½¿ç”¨ä½“éªŒ

### é˜¶æ®µ 2: è¿‡æ¸¡æœŸ (3å¤©)
**ç›®æ ‡**: æ–°ç³»ç»Ÿä½œä¸ºä¸»è¦é—¨ç¦ï¼Œæ—§ç³»ç»Ÿä½œä¸ºå¤‡ç”¨

#### 2.1 ä¼˜å…ˆçº§è°ƒæ•´
è°ƒæ•´åˆ†æ”¯ä¿æŠ¤è§„åˆ™ä¸­çš„çŠ¶æ€æ£€æŸ¥ä¼˜å…ˆçº§ï¼š
- **å¿…éœ€**: æ–°ç»Ÿä¸€é—¨ç¦ (ä¸»è¦)
- **å¯é€‰**: æ—§åˆ†ç¦»é—¨ç¦ (å¤‡ç”¨)

#### 2.2 é—®é¢˜å¤„ç†æµç¨‹
- **æ–°ç³»ç»Ÿæ•…éšœ**: ä¸´æ—¶å¯ç”¨æ—§ç³»ç»Ÿä½œä¸ºä¸»è¦é—¨ç¦
- **è¯¯æŠ¥å¤„ç†**: ä¼˜å…ˆä¿®å¤æ–°ç³»ç»Ÿï¼Œå¿…è¦æ—¶å›é€€
- **æ€§èƒ½é—®é¢˜**: ç›‘æ§å¹¶ä¼˜åŒ–æ–°ç³»ç»Ÿæ‰§è¡Œæ—¶é—´

### é˜¶æ®µ 3: å®Œå…¨åˆ‡æ¢æœŸ (1å¤©)
**ç›®æ ‡**: å®Œå…¨åˆ‡æ¢åˆ°æ–°ç³»ç»Ÿï¼Œç§»é™¤æ—§æ£€æŸ¥

#### 3.1 ç§»é™¤æ—§çŠ¶æ€æ£€æŸ¥
ä»åˆ†æ”¯ä¿æŠ¤è§„åˆ™ä¸­ç§»é™¤ï¼š
- `Security Checks / security-scan` (æ—§)
- `ğŸ”’ å®‰å…¨E2Eæµ‹è¯• / security-tests` (æ—§)  
- `ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-å¼€å‘ç¯å¢ƒ / observability-dev` (æ—§)
- `ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-é¢„å‘ç¯å¢ƒ / observability-staging` (æ—§)
- `ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-ç”Ÿäº§ç¯å¢ƒ / observability-prod` (æ—§)

#### 3.2 ä¿ç•™å¿…éœ€çŠ¶æ€æ£€æŸ¥
ç¡®ä¿ä»¥ä¸‹æ£€æŸ¥ä¿æŒå¿…éœ€çŠ¶æ€ï¼š
- `Security Gate (Unified) / security-gate`
- `Observability Gate (Unified) / observability-checks`
- `Quality Gates / quality-checks`

#### 3.3 è½¯é—¨ç¦è®¾ç½®
å°†ä»¥ä¸‹è®¾ä¸ºå¯é€‰ï¼ˆéé˜»å¡ï¼‰ï¼š
- `Soft Gates Quality Check`

---

## ğŸ”§ è¯¦ç»†è¿ç§»æ­¥éª¤

### æ­¥éª¤ 1: GitHub åˆ†æ”¯ä¿æŠ¤è§„åˆ™æ›´æ–°

#### è®¿é—®åˆ†æ”¯ä¿æŠ¤è®¾ç½®
1. è¿›å…¥ GitHub ä»“åº“
2. Settings â†’ Branches  
3. ç¼–è¾‘ `main` åˆ†æ”¯è§„åˆ™

#### æ›´æ–°çŠ¶æ€æ£€æŸ¥åˆ—è¡¨
```diff
# é˜¶æ®µ1 - æ·»åŠ æ–°æ£€æŸ¥ (ä¿ç•™æ—§æ£€æŸ¥)
âœ… Security Checks / security-scan                    # æ—§ - æš‚æ—¶ä¿ç•™
âœ… ğŸ”’ å®‰å…¨E2Eæµ‹è¯• / security-tests                    # æ—§ - æš‚æ—¶ä¿ç•™
+ Security Gate (Unified) / security-gate             # æ–° - æ·»åŠ 
âœ… ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-å¼€å‘ç¯å¢ƒ / observability-dev        # æ—§ - æš‚æ—¶ä¿ç•™  
âœ… ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-é¢„å‘ç¯å¢ƒ / observability-staging   # æ—§ - æš‚æ—¶ä¿ç•™
âœ… ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-ç”Ÿäº§ç¯å¢ƒ / observability-prod      # æ—§ - æš‚æ—¶ä¿ç•™
+ Observability Gate (Unified) / observability-checks # æ–° - æ·»åŠ 
âœ… Quality Gates / quality-checks                     # ä¿æŒ
+ Soft Gates Quality Check                            # æ–° - å¯é€‰
```

```diff
# é˜¶æ®µ3 - ç§»é™¤æ—§æ£€æŸ¥ (ä»…ä¿ç•™æ–°æ£€æŸ¥)
- Security Checks / security-scan                     # ç§»é™¤
- ğŸ”’ å®‰å…¨E2Eæµ‹è¯• / security-tests                     # ç§»é™¤
âœ… Security Gate (Unified) / security-gate            # å¿…éœ€
- ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-å¼€å‘ç¯å¢ƒ / observability-dev         # ç§»é™¤
- ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-é¢„å‘ç¯å¢ƒ / observability-staging    # ç§»é™¤  
- ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-ç”Ÿäº§ç¯å¢ƒ / observability-prod       # ç§»é™¤
âœ… Observability Gate (Unified) / observability-checks # å¿…éœ€
âœ… Quality Gates / quality-checks                     # å¿…éœ€
â—‹ Soft Gates Quality Check                           # å¯é€‰ (ä¸­æ€§çŠ¶æ€)
```

### æ­¥éª¤ 2: å·¥ä½œæµæ–‡ä»¶ç®¡ç†

#### é˜¶æ®µ1 - å¹¶è¡Œè¿è¡Œ
```bash
# ä¿æŒæ‰€æœ‰å·¥ä½œæµæ–‡ä»¶
ls .github/workflows/
# security.yml                 # æ—§ - ä¿ç•™
# security-e2e.yml            # æ—§ - ä¿ç•™  
# security-unified.yml         # æ–° - å¯ç”¨
# observability-gate.yml       # æ–° - å¯ç”¨ (ç»Ÿä¸€)
# soft-gates.yml              # æ–° - å¯ç”¨
```

#### é˜¶æ®µ3 - æ¸…ç†æ—§æ–‡ä»¶
```bash
# ç§»åŠ¨æ—§æ–‡ä»¶åˆ°å¤‡ä»½ç›®å½•
mkdir -p .github/workflows/backup
mv .github/workflows/security.yml .github/workflows/backup/
mv .github/workflows/security-e2e.yml .github/workflows/backup/

# æˆ–é‡å‘½åä¸ºç¦ç”¨çŠ¶æ€
mv .github/workflows/security.yml .github/workflows/security.yml.disabled
```

---

## ğŸ“Š è¿ç§»éªŒè¯æ£€æŸ¥æ¸…å•

### âœ… åŠŸèƒ½éªŒè¯
- [ ] æ–°å®‰å…¨é—¨ç¦æ­£ç¡®æ£€æµ‹Criticalçº§åˆ«å®‰å…¨é—®é¢˜
- [ ] æ–°å¯è§‚æµ‹æ€§é—¨ç¦æ­£ç¡®éªŒè¯é…ç½®ä¸€è‡´æ€§  
- [ ] è½¯é—¨ç¦æä¾›è´¨é‡åé¦ˆä½†ä¸é˜»å¡åˆå¹¶
- [ ] æ‰€æœ‰ç°æœ‰å®‰å…¨æ£€æŸ¥é¡¹ç›®éƒ½è¢«æ–°ç³»ç»Ÿè¦†ç›–
- [ ] CIæ‰§è¡Œæ—¶é—´æ˜æ˜¾é™ä½ (ç›®æ ‡: 50%)

### âœ… å®‰å…¨éªŒè¯  
- [ ] å®‰å…¨æ‰«æè¦†ç›–èŒƒå›´æœªå‡å°‘
- [ ] Criticalçº§åˆ«å®‰å…¨é—®é¢˜ä¾ç„¶è¢«é˜»å¡
- [ ] E2Eå®‰å…¨æµ‹è¯•æ­£å¸¸æ‰§è¡Œ
- [ ] æ— å®‰å…¨æ£€æµ‹ç›²åŒºæˆ–é—æ¼

### âœ… æµç¨‹éªŒè¯
- [ ] PRåˆ›å»ºè§¦å‘æ‰€æœ‰å¿…éœ€æ£€æŸ¥
- [ ] å¤±è´¥çš„æ£€æŸ¥æ­£ç¡®é˜»å¡åˆå¹¶
- [ ] è½¯é—¨ç¦å¤±è´¥ä¸é˜»å¡åˆå¹¶
- [ ] çŠ¶æ€æ£€æŸ¥çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®

### âœ… æ€§èƒ½éªŒè¯
- [ ] CIæ€»æ‰§è¡Œæ—¶é—´ < æ—§ç³»ç»Ÿçš„60%  
- [ ] å¹¶å‘æ£€æŸ¥å‡å°‘èµ„æºäº‰ç”¨
- [ ] é‡å¤æ£€æŸ¥å®Œå…¨æ¶ˆé™¤
- [ ] å¼€å‘è€…ç­‰å¾…æ—¶é—´æ˜æ˜¾ç¼©çŸ­

---

## ğŸš¨ åº”æ€¥å›æ»šè®¡åˆ’

### è§¦å‘å›æ»šæ¡ä»¶
- æ–°ç³»ç»Ÿå…³é”®æ•…éšœè¶…è¿‡30åˆ†é’Ÿ
- å®‰å…¨æ£€æµ‹å‡ºç°é—æ¼æˆ–è¯¯æŠ¥
- CIæ‰§è¡Œæ—¶é—´è¶…è¿‡æ—§ç³»ç»Ÿ
- å›¢é˜Ÿå¼ºçƒˆåå¯¹æ–°ç³»ç»Ÿ

### å¿«é€Ÿå›æ»šæ­¥éª¤ (5åˆ†é’Ÿå†…)

#### 1. ç«‹å³æ¢å¤åˆ†æ”¯ä¿æŠ¤è§„åˆ™
```diff
# ç´§æ€¥æ¢å¤æ—§çŠ¶æ€æ£€æŸ¥ä¸ºå¿…éœ€
âœ… Security Checks / security-scan
âœ… ğŸ”’ å®‰å…¨E2Eæµ‹è¯• / security-tests  
â—‹ Security Gate (Unified) / security-gate        # è®¾ä¸ºå¯é€‰
âœ… ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-å¼€å‘ç¯å¢ƒ / observability-dev
âœ… ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-é¢„å‘ç¯å¢ƒ / observability-staging
âœ… ğŸ“Š å¯è§‚æµ‹æ€§æ£€æŸ¥-ç”Ÿäº§ç¯å¢ƒ / observability-prod  
â—‹ Observability Gate (Unified) / observability-checks # è®¾ä¸ºå¯é€‰
```

#### 2. æ¢å¤æ—§å·¥ä½œæµæ–‡ä»¶
```bash
# ä»å¤‡ä»½æ¢å¤
cp .github/workflows/backup/security.yml .github/workflows/
cp .github/workflows/backup/security-e2e.yml .github/workflows/

# æˆ–é‡å‘½åå›æ¥
mv .github/workflows/security.yml.disabled .github/workflows/security.yml
```

#### 3. ç¦ç”¨æ–°å·¥ä½œæµ
```bash
# ä¸´æ—¶ç¦ç”¨æ–°å·¥ä½œæµ
mv .github/workflows/security-unified.yml .github/workflows/security-unified.yml.disabled
mv .github/workflows/observability-gate.yml .github/workflows/observability-gate.yml.disabled
mv .github/workflows/soft-gates.yml .github/workflows/soft-gates.yml.disabled
```

### å›æ»šåå¤„ç†
- **é€šçŸ¥å›¢é˜Ÿ** - å›æ»šåŸå› å’Œé¢„æœŸä¿®å¤æ—¶é—´
- **é—®é¢˜åˆ†æ** - åˆ†ææ•…éšœæ ¹å› ï¼Œåˆ¶å®šä¿®å¤è®¡åˆ’
- **é‡æ–°éƒ¨ç½²** - ä¿®å¤é—®é¢˜åé‡æ–°å¼€å§‹è¿ç§»æµç¨‹

---

## ğŸ“ è¿ç§»æ”¯æŒ

### è¿ç§»æœŸé—´è”ç³»æ–¹å¼
- **æŠ€æœ¯æ”¯æŒ**: ç³»ç»Ÿç®¡ç†å‘˜
- **ç´§æ€¥æƒ…å†µ**: å€¼ç­å·¥ç¨‹å¸ˆ
- **ä¸šåŠ¡å’¨è¯¢**: é¡¹ç›®ç»ç†

### å¸¸è§é—®é¢˜å¤„ç†
- **æ–°æ£€æŸ¥å¤±è´¥**: æŸ¥çœ‹å·¥ä½œæµæ—¥å¿—ï¼Œåˆ†æå…·ä½“é”™è¯¯
- **æ€§èƒ½ä¸è¾¾é¢„æœŸ**: æ£€æŸ¥å¹¶è¡Œé…ç½®å’Œèµ„æºåˆ†é…
- **å›¢é˜Ÿé€‚åº”é—®é¢˜**: æä¾›åŸ¹è®­å’Œæ–‡æ¡£æ”¯æŒ

---

*è¿ç§»å®Œæˆåï¼Œè¯·åˆ é™¤å¤‡ä»½çš„æ—§å·¥ä½œæµæ–‡ä»¶å¹¶æ›´æ–°ç›¸å…³æ–‡æ¡£*