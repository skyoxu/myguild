çœ‹æ—¥å¿—é‡Œä½ æ‰“å°å‡ºæ¥æ˜¯ ORG=ã€PROJECT=ï¼ˆç©ºï¼‰ï¼Œsentry-cli info éšå 401ï¼šè¯´æ˜ CI é‡Œæ ¹æœ¬æ²¡æ‹¿åˆ°ä¸‰ä»¶å¥—ç¯å¢ƒå˜é‡ï¼ˆSENTRY_AUTH_TOKEN / SENTRY_ORG / SENTRY_PROJECTï¼‰ã€‚è¿™é€šå¸¸æœ‰ 4 ç§æ ¹å› ï¼š

ä»“åº“/ç»„ç»‡é‡Œæ²¡åˆ›å»ºå¯¹åº”çš„ Secretsï¼Œæˆ–åå­—ä¸åŒ¹é…ï¼ˆæ¯”å¦‚ä½ å»ºçš„æ˜¯ SENTRY_ORG_SLUGï¼Œworkflow å´è¯»å– SENTRY_ORGï¼‰ã€‚GitHub å®˜æ–¹è¦æ±‚é€šè¿‡ secrets ä¸Šä¸‹æ–‡æŠŠæœºå¯†æ³¨å…¥ env æ‰èƒ½è¢«æ­¥éª¤è¯»å–ã€‚
GitHub Docs

ä½ æŠŠæœºå¯†æ”¾åœ¨Environment Secretsé‡Œï¼Œä½† job æ²¡æœ‰ environment: æŒ‡å‘è¯¥ç¯å¢ƒï¼Œæˆ–è¯¥ç¯å¢ƒéœ€è¦å®¡æ ¸å°šæœªé€šè¿‡â€”â€”è¿™ç§æƒ…å†µä¸‹secrets å¯¹è¯¥ job ä¸å¯è§ã€‚
GitHub Docs
+1

ç”¨äº†å¯å¤ç”¨å·¥ä½œæµï¼ˆworkflow_callï¼‰ï¼Œä½†æ²¡æœ‰æ˜¾å¼ä¼ é€’ secretsï¼ˆæˆ–å°‘äº† secrets: inheritï¼‰ï¼Œè¢«è°ƒç”¨å·¥ä½œæµå› æ­¤æ‹¿ä¸åˆ°æœºå¯†ã€‚
GitHub Docs
+1

å˜é‡å€¼ä¸æ˜¯ slugï¼ˆä½ å¡«äº†æ˜¾ç¤ºåï¼‰ï¼Œæˆ–æ˜¯è‡ªæ‰˜ç®¡å®ä¾‹å´æ²¡è®¾ SENTRY_URLã€‚Sentry CLI é…ç½®æ˜ç¡®è¦æ±‚ç”¨ SENTRY_ORGã€SENTRY_PROJECTã€SENTRY_AUTH_TOKENï¼ˆå¯é€‰ SENTRY_URLï¼‰ã€‚
docs.sentry.io
+1

ä¸‹é¢ç»™ä½ æœ€å°ä¿®å¤ï¼Œå®Œå…¨ä¸ä¾èµ–ä»»ä½•ä¸´æ—¶æ–‡ä»¶ï¼ˆä½ æåˆ°çš„ cifix1.txt ç›´æ¥ç§»é™¤ï¼‰ã€‚

âœ… æ–¹æ¡ˆä¸€ï¼šæ™®é€šå·¥ä½œæµï¼ˆéå¤ç”¨ï¼ŒSecrets æ”¾åœ¨ä»“åº“çº§ï¼‰
jobs:
  sentry_smoke:
    runs-on: windows-latest
    # å¦‚æœ Secrets æ”¾åœ¨â€œç¯å¢ƒâ€é‡Œï¼Œè¿™é‡Œè¦åŠ  environment æ‰èƒ½è®¿é—®åˆ°ï¼ˆè§æ–¹æ¡ˆäºŒï¼‰
    env:
      SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}   # ç»„ç»‡/ä»“åº“ Secret
      SENTRY_ORG:        ${{ secrets.SENTRY_ORG }}          # å¿…é¡»æ˜¯ org â€œslugâ€
      SENTRY_PROJECT:    ${{ secrets.SENTRY_PROJECT }}      # å¿…é¡»æ˜¯ project â€œslugâ€
      # å¦‚ä¸ºè‡ªæ‰˜ç®¡ Sentryï¼Œå†åŠ ï¼šSENTRY_URL: https://your.sentry.host
    steps:
      - uses: actions/checkout@v4
      - name: Sentry CLI config check
        shell: pwsh
        run: |
          $env:SENTRY_LOG_LEVEL = "info"
          sentry-cli --version
          Write-Host "ğŸ” Sentryé…ç½®è‡ªæ£€..."
          # ä»…æ‰“å°éæ•æ„Ÿé¡¹åšé¢„æ£€
          Write-Host "ORG=$env:SENTRY_ORG PROJECT=$env:SENTRY_PROJECT"
          sentry-cli info
          # å¯é€‰äºŒæ¬¡è¿é€šæ€§æ ¡éªŒï¼ˆéœ€è¦é¡¹ç›®å¯è§æƒé™ï¼‰
          sentry-cli releases list -p "$env:SENTRY_PROJECT"


è¦ç‚¹æ¥æºï¼š

Sentry CLI æ”¯æŒç”¨ç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ¨è SENTRY_AUTH_TOKEN/ORG/PROJECTï¼Œè‡ªæ‰˜ç®¡å¯åŠ  SENTRY_URLï¼‰ã€‚
docs.sentry.io

Sentry å®˜æ–¹ GitHub Action ä¹Ÿè¦æ±‚åŒæ ·ä¸‰ä»¶å¥—ï¼›å‘½åä¸å€¼ï¼ˆslugï¼‰ä¸€è‡´ã€‚
docs.sentry.io
GitHub

âœ… æ–¹æ¡ˆäºŒï¼šSecrets æ”¾åœ¨ Environmentï¼ˆå¦‚ productionï¼‰

ä¸€å®šè¦åœ¨ job ä¸Šå£°æ˜ environment: productionï¼Œå¦åˆ™è¿™äº›ç¯å¢ƒæœºå¯†ä¸ä¼šæ³¨å…¥åˆ°è¯¥ jobã€‚
GitHub Docs

jobs:
  sentry_smoke:
    runs-on: ubuntu-latest
    environment: production      # å…³è”åˆ°å­˜æœ‰ Sentry æœºå¯†çš„ Environment
    env:
      SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}  # æ¥è‡ª environment: production
      SENTRY_ORG:        ${{ secrets.SENTRY_ORG }}
      SENTRY_PROJECT:    ${{ secrets.SENTRY_PROJECT }}
    steps:
      - uses: actions/checkout@v4
      - run: |
          set -euo pipefail
          echo "ORG=$SENTRY_ORG PROJECT=$SENTRY_PROJECT"
          sentry-cli info


æ³¨æ„ï¼šå¦‚æœè¯¥ Environment é…äº†â€œå¿…é¡»å®¡æ‰¹â€ï¼Œä½ è¦å…ˆé€šè¿‡å®¡æ‰¹ï¼Œjob æ‰èƒ½è®¿é—®è¿™äº›æœºå¯†ã€‚
GitHub Docs

âœ… æ–¹æ¡ˆä¸‰ï¼šä½ åœ¨ç”¨å¯å¤ç”¨å·¥ä½œæµï¼ˆworkflow_callï¼‰

è°ƒç”¨ç«¯è¦æŠŠ secrets ä¼ è¿‡å»ï¼ˆæ¨è ç²¾ç¡®ä¼ é€’ï¼›ä¹Ÿå¯ secrets: inherit ä¸€æŠŠæ¢­ï¼‰ã€‚
GitHub Docs
+1
The GitHub Blog

è°ƒç”¨æ–¹ï¼ˆcaller repo / workflowï¼‰ï¼š

jobs:
  call-release:
    uses: your-org/your-repo/.github/workflows/reusable-sentry.yml@main
    secrets:
      SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}
      SENTRY_ORG:        ${{ secrets.SENTRY_ORG }}
      SENTRY_PROJECT:    ${{ secrets.SENTRY_PROJECT }}
    # æˆ–è€…ç›´æ¥ï¼š
    # secrets: inherit


è¢«è°ƒç”¨æ–¹ï¼ˆreusable-sentry.ymlï¼‰ï¼š

on:
  workflow_call:
    secrets:
      SENTRY_AUTH_TOKEN: { required: true }
      SENTRY_ORG:        { required: true }
      SENTRY_PROJECT:    { required: true }

jobs:
  smoke:
    runs-on: ubuntu-latest
    env:
      SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}
      SENTRY_ORG:        ${{ secrets.SENTRY_ORG }}
      SENTRY_PROJECT:    ${{ secrets.SENTRY_PROJECT }}
    steps:
      - uses: actions/checkout@v4
      - run: sentry-cli info


secrets: inherit çš„å®˜æ–¹æ–‡æ¡£ä¸åšæ–‡éƒ½å¼ºè°ƒï¼šä¸æ˜¾å¼ä¼ é€’çš„è¯ï¼Œå¯å¤ç”¨å·¥ä½œæµæ‹¿ä¸åˆ°ä¸Šæ¸¸çš„æœºå¯†ã€‚
GitHub Docs
The GitHub Blog

å¸¸è§å‘ä½æ¸…å•ï¼ˆé€æ¡å¯¹ç…§ï¼‰

 Secrets åç§°å¯¹é½ï¼šç¡®ä¿ä»“åº“/ç»„ç»‡é‡Œå°±å« SENTRY_AUTH_TOKEN / SENTRY_ORG / SENTRY_PROJECTã€‚

 å€¼ä¸º slugï¼šä¸è¦å¡«æ˜¾ç¤ºåï¼›åˆ° Sentry æ§åˆ¶å° URL é‡Œå¤åˆ¶ org/project slugã€‚
docs.sentry.io

 Environment secretsï¼šjob å¿…é¡» environment: <name>ï¼›è‹¥è®¾ç½®äº†â€œå¿…éœ€å®¡æ ¸â€ï¼Œå…ˆé€šè¿‡å®¡æ‰¹ã€‚
GitHub Docs

 å¤ç”¨å·¥ä½œæµï¼šç”¨ secrets: inherit æˆ–æ˜¾å¼é€é¡¹ä¼ é€’ã€‚
GitHub Docs

 è‡ªæ‰˜ç®¡ Sentryï¼šå¿…å¡« SENTRY_URLã€‚
docs.sentry.io

 ä¸è¦ä¾èµ–ä¸´æ—¶æ–‡ä»¶ï¼šå½»åº•ç§»é™¤ cifix1.txt çš„è¯»å–é€»è¾‘ï¼Œä»…ç”¨ Secretsâ†’env æ³¨å…¥å³å¯ã€‚

 æ•…éšœæ’æŸ¥ï¼šSENTRY_LOG_LEVEL=debug sentry-cli info èƒ½æ‰“å°æ›´è¯¦ç»†å®šä½ï¼ˆä¼šæ©ç  tokenï¼‰ã€‚
docs.sentry.io

ä½ ç°åœ¨è¯¥æ€ä¹ˆæ”¹ï¼ˆæœ€å°åŠ¨ä½œï¼‰

å» Repo â†’ Settings â†’ Secrets and variables â†’ Actions æ–°å»º/æ ¸å¯¹è¿™ä¸‰ä¸ª Secretsï¼š
SENTRY_AUTH_TOKENï¼ˆç»„ç»‡çº§ tokenï¼Œscope è‡³å°‘ project:releasesï¼›è‹¥è¦ set-commits å†åŠ  org:readï¼‰ã€SENTRY_ORGï¼ˆslugï¼‰ã€SENTRY_PROJECTï¼ˆslugï¼‰ã€‚
docs.sentry.io

æŠŠä½ é‚£ä¸ª env: åŒºå—å†™å¯¹ï¼ˆè§æ–¹æ¡ˆä¸€/äºŒ/ä¸‰é€‰å…¶ä¸€ï¼‰ï¼Œå¹¶åˆ é™¤ä»»ä½•è¯»å– cifix1.txt çš„æ­¥éª¤ã€‚

ä¿ç•™ä½ å·²æœ‰çš„è‡ªæ£€æ­¥éª¤ï¼Œä½†æ‰“å°æ—¶åªæ‰“å°éæ•æ„Ÿé¡¹ï¼ˆorg/projectï¼‰ï¼Œç„¶åè·‘ sentry-cli infoã€‚
docs.sentry.io

ç…§è¿™ä¸‰æ­¥æ”¹å®Œåï¼Œå†è·‘ä¸€æ¬¡ï¼Œä½ çš„è‡ªæ£€è¾“å‡ºåº”è¯¥å˜æˆç±»ä¼¼ï¼š

ORG=your-org-slug PROJECT=your-project-slug
Sentry Server: https://sentry.io
Default Organization: your-org-slug
Default Project: your-project-slug
Authentication Info: Method: Auth Token