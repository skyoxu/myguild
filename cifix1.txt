Run npm run test:e2e:scene-transition

> gamedev-vitegame@0.2.0 test:e2e:scene-transition
> playwright test --project=scene-transition

[dotenv@17.2.1] injecting env (2) from .env.cache-bust -- tip: ğŸ“¡ version env with Radar: https://dotenvx.com/radar
[playwright-config] E2E_SECURITY_TIMEOUT_MS=300000
[playwright-config] PW_CACHE_BUST=git:207febb2-pkg:1758555595-pw:1758548919-node:22.16

Running 27 tests using 1 worker
[dotenv@17.2.1] injecting env (0) from .env.cache-bust -- tip: âš™ï¸  suppress all logs with { quiet: true }
[playwright-config] E2E_SECURITY_TIMEOUT_MS=300000
[playwright-config] PW_CACHE_BUST=git:207febb2-pkg:1758555595-pw:1758548919-node:22.16
ğŸš€ å¼€å§‹å¯åŠ¨ Electron åº”ç”¨...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
âœ… Electron åº”ç”¨å¯åŠ¨æˆåŠŸï¼Œè€—æ—¶: 995ms
âœ… URLåè®®éªŒè¯é€šè¿‡: app://index.html/
viewportSize() è¿”å› undefinedï¼Œè·³è¿‡å°ºå¯¸éªŒè¯
Â·ğŸ”’ å¼€å§‹å®‰å…¨åŸºçº¿éªŒè¯æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
â„¹ï¸ æœªæ£€æµ‹åˆ°contextBridge APIï¼Œè¯·ç¡®è®¤æ˜¯å¦éœ€è¦IPCé€šä¿¡
Â·ğŸ›¡ï¸ å¼€å§‹CSPç­–ç•¥éªŒè¯æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
Â·âš™ï¸ å¼€å§‹è¿›ç¨‹åˆ†ç¦»éªŒè¯æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
Â·â±ï¸ å¼€å§‹å¯åŠ¨æ—¶é—´æ€§èƒ½æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
åº”ç”¨å¯åŠ¨æ—¶é—´: 1238ms
Â·ğŸ¯ å¼€å§‹çª—å£å“åº”æ€§æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
UIå“åº”æ—¶é—´: 49ms
Â·ğŸ”„ å¼€å§‹åº”ç”¨ç¨³å®šæ€§æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
Â·ğŸ§  å¼€å§‹å†…å­˜æ³„æ¼æ£€æŸ¥æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
å†…å­˜ä½¿ç”¨æƒ…å†µ: { used: 5412656, total: 7670216, limit: 4294705152 }
Â·[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
âœ… Perfæµ‹è¯•URLåè®®éªŒè¯é€šè¿‡: app://index.html/
[CI] window prepared for interaction (using document.readyState)
Â·interaction_response P95é‡‡æ ·ç»Ÿè®¡:
  æ ·æœ¬æ•°é‡: 30
  P95å€¼: 21.00ms
  å¹³å‡å€¼: 18.10ms
  æœ€å°å€¼: 16.00ms
  æœ€å¤§å€¼: 22.00ms
  é˜ˆå€¼: 200ms
Â·ğŸ” å¼€å§‹åè®®éªŒè¯æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
ğŸ“‹ å½“å‰URL: app://index.html/
Ã—[dotenv@17.2.1] injecting env (0) from .env.cache-bust -- tip: âš™ï¸  enable debug logging with { debug: true }
[playwright-config] E2E_SECURITY_TIMEOUT_MS=300000
[playwright-config] PW_CACHE_BUST=git:207febb2-pkg:1758555595-pw:1758548919-node:22.16
ğŸ” å¼€å§‹åè®®éªŒè¯æµ‹è¯•...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
ğŸ“‹ å½“å‰URL: app://index.html/
F[dotenv@17.2.1] injecting env (0) from .env.cache-bust -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[playwright-config] E2E_SECURITY_TIMEOUT_MS=300000
[playwright-config] PW_CACHE_BUST=git:207febb2-pkg:1758555595-pw:1758548919-node:22.16
ğŸ”„ æµ‹è¯•åº”ç”¨é‡å¯ååè®®ä¸€è‡´æ€§...
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
âœ… åè®®ä¸€è‡´æ€§éªŒè¯é€šè¿‡:
   - ç¬¬ä¸€æ¬¡: app://index.html/
   - ç¬¬äºŒæ¬¡: app://index.html/
Â·[launch] CI mode: reusing existing build (cached)
[launch] using Electron entry: D:\a\myguild\myguild\dist-electron\electron\main.js
âœ… ElectronåŸºçº¿æµ‹è¯•URLåè®®éªŒè¯é€šè¿‡: app://index.html/
âœ… åº”ç”¨å¯åŠ¨æ­£å¸¸ï¼Œæ ‡é¢˜: "Guild Manager - Vite + React + TS"
Â·Â·âœ… Electron CSPç­–ç•¥éªŒè¯é€šè¿‡: default-src 'none'; script-src 'self'; style-src 'self'; img-src 'self' data: blob:; font-src 'self'; connect-src 'self' https://o.sentry.io; object-src 'none'; base-uri 'none'; frame-ancestors 'none'; form-action 'self'
Â·ğŸ” æš´éœ²çš„ API é”®: []
âš ï¸ æ²™ç›’æ¨¡å¼ä¸‹é¢„åŠ è½½è„šæœ¬åŠŸèƒ½å—é™ï¼Œè¿™æ˜¯Electronçš„å·²çŸ¥é™åˆ¶
ğŸ” å…¨éƒ¨windowé”®(å‰20ä¸ª): [
  'window',      'self',
  'document',    'name',
  'location',    'customElements',
  'history',     'navigation',
  'locationbar', 'menubar',
  'personalbar', 'scrollbars',
  'statusbar',   'toolbar',
  'status',      'closed',
  'frames',      'length',
  'top',         'opener'
]
ğŸ” electronAPIç±»å‹: undefined
ğŸ” electronAPIå†…å®¹: undefined
ğŸ” customAPIçŠ¶æ€: false
ğŸ” customAPIå†…å®¹: undefined
ğŸ“‹ æ²™ç›’æ¨¡å¼å®‰å…¨æ€§ä¼˜å…ˆï¼Œé¢„åŠ è½½APIåŠŸèƒ½é™çº§æ˜¯å¯æ¥å—çš„æƒè¡¡
Â·âœ… å®‰å…¨ä¸‰å¼€å…³ç¡¬æ–­è¨€éªŒè¯é€šè¿‡ - ä¸»è¿›ç¨‹ä¾§ç¡®è®¤
ğŸ“‹ å®‰å…¨é…ç½®è¯¦æƒ…: {
  nodeIntegration: false,
  contextIsolation: true,
  sandbox: true,
  webSecurity: true
}
Â·[CI] window prepared for interaction (using document.readyState)
âœ… äº¤äº’å“åº”æ—¶é—´: 44ms
Â·ğŸ“Š JS å †å†…å­˜ä½¿ç”¨: 5.31 MB
Â·Â·âœ… åº”ç”¨çŠ¶æ€æ£€æŸ¥é€šè¿‡: { isReady: true, isPackaged: false, windowCount: 1 }
Â·ğŸ“ æ„å»ºäº§ç‰©éªŒè¯: {
  appName: 'ViteGame',
  appVersion: '0.2.0',
  isReady: true,
  isPackaged: false,
  processVersion: '37.2.4',
  nodeVersion: '22.17.1',
  platform: 'win32',
  arch: 'x64',
  nodeEnv: 'unknown',
  checkedAt: '2025-09-23T15:34:48.997Z'
}
Â·ğŸ“¦ åº”ç”¨ä¿¡æ¯: { version: '0.2.0', name: 'ViteGame', ready: true }
Â·

  1) [electron-smoke-tests] â€º tests\e2e\smoke\protocol-validation.spec.ts:12:3 â€º åè®®éªŒè¯ä¸“é¡¹æµ‹è¯• â€º URLåè®®è‡ªæ£€æ–­è¨€ - éªŒæ”¶è„šæœ¬ 

    Error: expect(received).toMatch(expected)

    Expected pattern: /\.(html|js)$/
    Received string:  "app://index.html/"

      28 |
      29 |     // é¢å¤–éªŒè¯ï¼šURLåº”è¯¥åŒ…å«é¢„æœŸçš„æ–‡ä»¶è·¯å¾„
    > 30 |     expect(url).toMatch(/\.(html|js)$/);
         |                 ^
      31 |
      32 |     console.log('âœ… åè®®éªŒè¯æ–­è¨€å…¨éƒ¨é€šè¿‡');
      33 |     console.log(`   - URLåè®®æ­£ç¡®: ${url.split('://')[0]}://`);
        at D:\a\myguild\myguild\tests\e2e\smoke\protocol-validation.spec.ts:30:17

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error: expect(received).toMatch(expected)

    Expected pattern: /\.(html|js)$/
    Received string:  "app://index.html/"

      28 |
      29 |     // é¢å¤–éªŒè¯ï¼šURLåº”è¯¥åŒ…å«é¢„æœŸçš„æ–‡ä»¶è·¯å¾„
    > 30 |     expect(url).toMatch(/\.(html|js)$/);
         |                 ^
      31 |
      32 |     console.log('âœ… åè®®éªŒè¯æ–­è¨€å…¨éƒ¨é€šè¿‡');
      33 |     console.log(`   - URLåè®®æ­£ç¡®: ${url.split('://')[0]}://`);
        at D:\a\myguild\myguild\tests\e2e\smoke\protocol-validation.spec.ts:30:17

    attachment #1: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\artifacts\smoke-protocol-validation-åè®®éªŒè¯ä¸“é¡¹æµ‹è¯•-URLåè®®è‡ªæ£€æ–­è¨€---éªŒæ”¶è„šæœ¬-electron-smoke-tests-retry1\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\smoke-protocol-validation-åè®®éªŒè¯ä¸“é¡¹æµ‹è¯•-URLåè®®è‡ªæ£€æ–­è¨€---éªŒæ”¶è„šæœ¬-electron-smoke-tests-retry1\trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1 failed
    [electron-smoke-tests] â€º tests\e2e\smoke\protocol-validation.spec.ts:12:3 â€º åè®®éªŒè¯ä¸“é¡¹æµ‹è¯• â€º URLåè®®è‡ªæ£€æ–­è¨€ - éªŒæ”¶è„šæœ¬ 
  4 did not run
  22 passed (35.7s)
Error:   1) [electron-smoke-tests] â€º tests\e2e\smoke\protocol-validation.spec.ts:12:3 â€º åè®®éªŒè¯ä¸“é¡¹æµ‹è¯• â€º URLåè®®è‡ªæ£€æ–­è¨€ - éªŒæ”¶è„šæœ¬ 
    Error: expect(received).toMatch(expected)

    Expected pattern: /\.(html|js)$/
    Received string:  "app://index.html/"

      28 |
      29 |     // é¢å¤–éªŒè¯ï¼šURLåº”è¯¥åŒ…å«é¢„æœŸçš„æ–‡ä»¶è·¯å¾„
    > 30 |     expect(url).toMatch(/\.(html|js)$/);
         |                 ^
      31 |
      32 |     console.log('âœ… åè®®éªŒè¯æ–­è¨€å…¨éƒ¨é€šè¿‡');
      33 |     console.log(`   - URLåè®®æ­£ç¡®: ${url.split('://')[0]}://`);
        at D:\a\myguild\myguild\tests\e2e\smoke\protocol-validation.spec.ts:30:17
Error:   1) [electron-smoke-tests] â€º tests\e2e\smoke\protocol-validation.spec.ts:12:3 â€º åè®®éªŒè¯ä¸“é¡¹æµ‹è¯• â€º URLåè®®è‡ªæ£€æ–­è¨€ - éªŒæ”¶è„šæœ¬ 

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Error: expect(received).toMatch(expected)

    Expected pattern: /\.(html|js)$/
    Received string:  "app://index.html/"

      28 |
      29 |     // é¢å¤–éªŒè¯ï¼šURLåº”è¯¥åŒ…å«é¢„æœŸçš„æ–‡ä»¶è·¯å¾„
    > 30 |     expect(url).toMatch(/\.(html|js)$/);
         |                 ^
      31 |
      32 |     console.log('âœ… åè®®éªŒè¯æ–­è¨€å…¨éƒ¨é€šè¿‡');
      33 |     console.log(`   - URLåè®®æ­£ç¡®: ${url.split('://')[0]}://`);
        at D:\a\myguild\myguild\tests\e2e\smoke\protocol-validation.spec.ts:30:17
Notice:   1 failed
    [electron-smoke-tests] â€º tests\e2e\smoke\protocol-validation.spec.ts:12:3 â€º åè®®éªŒè¯ä¸“é¡¹æµ‹è¯• â€º URLåè®®è‡ªæ£€æ–­è¨€ - éªŒæ”¶è„šæœ¬ 
  4 did not run
  22 passed (35.7s)
Error: Process completed with exit code 1.