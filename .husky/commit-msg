#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ“ éªŒè¯æäº¤ä¿¡æ¯æ ¼å¼..."

# éªŒè¯æäº¤ä¿¡æ¯æ ¼å¼ï¼ˆåŸºæœ¬è§„åˆ™ï¼‰
commit_msg=$(cat "$1")

# æ£€æŸ¥æäº¤ä¿¡æ¯é•¿åº¦
if [ ${#commit_msg} -lt 10 ]; then
    echo "âŒ æäº¤ä¿¡æ¯è¿‡çŸ­ï¼Œè‡³å°‘éœ€è¦10ä¸ªå­—ç¬¦"
    echo "ğŸ’¡ å»ºè®®æ ¼å¼: feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"
    exit 1
fi

# æ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦åŒ…å«æ„ä¹‰å†…å®¹ï¼ˆåŸºæœ¬æ£€æŸ¥ï¼‰
if echo "$commit_msg" | grep -qE "^(WIP|wip|fix|feat|docs|style|refactor|test|chore|perf|build|ci|revert)"; then
    echo "âœ… æäº¤ä¿¡æ¯æ ¼å¼æ­£ç¡®"
else
    echo "âš ï¸  å»ºè®®ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼ï¼š"
    echo "   feat: æ–°åŠŸèƒ½"
    echo "   fix: ä¿®å¤bug"
    echo "   docs: æ–‡æ¡£æ›´æ–°"
    echo "   style: ä»£ç æ ¼å¼è°ƒæ•´"
    echo "   refactor: é‡æ„"
    echo "   test: æµ‹è¯•ç›¸å…³"
    echo "   chore: æ„å»º/å·¥å…·ç›¸å…³"
    echo "   perf: æ€§èƒ½ä¼˜åŒ–"
    echo ""
    echo "å½“å‰æäº¤ä¿¡æ¯: $commit_msg"
fi

echo "ğŸ“ æäº¤ä¿¡æ¯éªŒè¯å®Œæˆ"