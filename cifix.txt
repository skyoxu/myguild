- 下面是完善 P2 的精确 diff：为三大工作流补顶层并发控制、PR 路径过滤，以及统一部分 artifacts 保留期；并为“工作流校验”本身补上并发控制。均为最小变更，不触碰
  依赖安装链或业务逻辑。

  Diff 1 — .github/workflows/build-and-test.yml（并发控制 + PR 路径过滤）
  --- a/.github/workflows/build-and-test.yml
  +++ b/.github/workflows/build-and-test.yml
  @@
   on:
     push:
       branches: [main, develop]
     pull_request:
       branches: [main, develop]
  +    paths:
  +      - 'src/**'
  +      - 'electron/**'
  +      - 'scripts/**'
  +      - 'tests/**'
  +      - 'package*.json'
  +      - 'tsconfig*.json'
  +      - 'vite.config.ts'
  +      - '.github/workflows/build-and-test.yml'
  @@
   permissions:
     contents: read
     actions: read
  +
  +concurrency:
  +  group: ${{ github.workflow }}-${{ github.ref }}
  +  cancel-in-progress: true
  Diff 2 — .github/workflows/ci.yml（并发控制 + PR/Push 路径过滤 + 统一 artifacts 保留期）
  --- a/.github/workflows/ci.yml
  +++ b/.github/workflows/ci.yml
  @@
   on:
     push:
  -    branches: [main, develop]
  +    branches: [main, develop]
  +    paths:
  +      - 'src/**'
  +      - 'electron/**'
  +      - 'scripts/**'
  +      - 'tests/**'
  +      - 'package*.json'
  +      - 'tsconfig*.json'
  +      - 'vite.config.ts'
  +      - '.github/workflows/ci.yml'
     pull_request:
  -    branches: [main, develop]
  +    branches: [main, develop]
  +    paths:
  +      - 'src/**'
  +      - 'electron/**'
  +      - 'scripts/**'
  +      - 'tests/**'
  +      - 'package*.json'
  +      - 'tsconfig*.json'
  +      - 'vite.config.ts'
  +      - '.github/workflows/ci.yml'
  @@
   permissions:
     contents: read
     actions: read
  -  pull-requests: write
  +
  +concurrency:
  +  group: ${{ github.workflow }}-${{ github.ref }}
  +  cancel-in-progress: true
  @@
     observability-verification:
  @@
  -      - name: 📤 上传可观测性报告
  +      - name: 📤 上传可观测性报告
           uses: actions/upload-artifact@v4
           with:
             name: observability-report
             path: reports/
  -          retention-days: 7
  +          retention-days: 14
  @@
     deployment-readiness:
  @@
  -      - name: 📋 上传部署清单
  +      - name: 📋 上传部署清单
           uses: actions/upload-artifact@v4
           with:
             name: deployment-checklist
             path: deployment-checklist.md
  -          retention-days: 90
  +          retention-days: 30
  Diff 3 — .github/workflows/release.yml（并发控制 + PR/Push 路径过滤）
  --- a/.github/workflows/release.yml
  +++ b/.github/workflows/release.yml
  @@
   on:
     push:
  -    branches: [main, release/*]
  -    tags: ['v*']
  +    branches: [main, release/*]
  +    tags: ['v*']
  +    paths:
  +      - 'src/**'
  +      - 'electron/**'
  +      - 'scripts/**'
  +      - 'package*.json'
  +      - 'tsconfig*.json'
  +      - 'vite.config.ts'
  +      - '.github/workflows/release.yml'
     pull_request:
  -    branches: [main]
  +    branches: [main]
  +    paths:
  +      - 'src/**'
  +      - 'electron/**'
  +      - 'scripts/**'
  +      - 'package*.json'
  +      - 'tsconfig*.json'
  +      - 'vite.config.ts'
  +      - '.github/workflows/release.yml'
  @@
   permissions:
     contents: write
     actions: read
     id-token: write
  +
  +concurrency:
  +  group: ${{ github.workflow }}-${{ github.ref }}
  +  cancel-in-progress: false
  Diff 4 — .github/workflows/validate-workflows.yml（并发控制）
  --- a/.github/workflows/validate-workflows.yml
  +++ b/.github/workflows/validate-workflows.yml
  @@
   permissions:
     contents: read

  -concurrency:
  -  group: ${{ github.workflow }}-${{ github.ref }}
  -  cancel-in-progress: true
  +concurrency:
  +  group: ${{ github.workflow }}-${{ github.ref }}
  +  cancel-in-progress: true
  （若该文件已存在 concurrency，可忽略此变更；保持与其它工作流一致即可。）

  可选（仅发布开启 sourcemap，一致性更好）

  - 如你想进一步统一 SourceMaps 触发时机，建议在 vite.config.ts 改为“仅生产发布启用”：
  --- a/vite.config.ts
  +++ b/vite.config.ts
  @@
     build: {
       outDir: 'dist',
       emptyOutDir: true,
  -    sourcemap: true,
  +    sourcemap: process.env.NODE_ENV === 'production',
     },
  执行后预期

  - 并发：同分支重复推送会自动取消前一轮，减少排队与资源浪费。
  - 路径过滤：文档类改动不再触发重任务；CI 更聚焦在代码/构建相关变更。
  - 产物：保留期一致，日常 14 天、发布/安全 30 天，便于清理与追溯。
  - 守护：validate-workflows.yml + needs 自检已就位；后续 job 改名/依赖漂移能被及时发现。